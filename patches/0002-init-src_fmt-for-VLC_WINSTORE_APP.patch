From 85450f072f09e3b07f38ddbc37b00ac4652bd18f Mon Sep 17 00:00:00 2001
From: Tung Huynh <tung75605@gmail.com>
Date: Wed, 6 Dec 2023 00:16:49 -0800
Subject: [PATCH 2/2] init src_fmt for VLC_WINSTORE_APP

---
 modules/video_output/win32/common.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/modules/video_output/win32/common.c b/modules/video_output/win32/common.c
index 83812826cc..4fdadec54f 100644
--- a/modules/video_output/win32/common.c
+++ b/modules/video_output/win32/common.c
@@ -86,6 +86,7 @@ int CommonInit(vout_display_t *vd)
     sys->hparent   = NULL;
     sys->hfswnd    = NULL;
     sys->changes   = 0;
+    sys->src_fmt   = &vd->source;
     sys->is_first_display = true;
     sys->is_on_top        = false;
 
@@ -119,8 +120,6 @@ int CommonInit(vout_display_t *vd)
     cfg.width  = vd->cfg->display.width;
     cfg.height = vd->cfg->display.height;
 
-    sys->src_fmt = &vd->source;
-
     event_hwnd_t hwnd;
     if (EventThreadStart(sys->event, &hwnd, &cfg))
         return VLC_EGENERIC;
-- 
2.42.0.windows.2

